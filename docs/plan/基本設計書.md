
# 基本設計書

## 1. システム概要

### 1.1 システム名称
Tarot Recorder

### 1.2 概要
タロット占いの結果を簡単に保存・閲覧・編集できるシステム。ユーザー（自分）が過去の占い結果を効率的に管理できるアプリケーションを提供します。

---

## 2. 機能仕様

### 2.1 入力機能
- **画面名**: タロット結果入力画面
- **機能概要**: ユーザーがタロット占い結果を入力するフォームを提供。
- **入力項目**:
  - **日付**: 占いの日付をカレンダーで選択。
  - **質問文**: 占いに用いた質問をテキストフィールドで入力。
  - **カード情報**:
    - **種類**: 0〜21の数字で選択。
    - **位置**: 正位置または逆位置（トグル）。
    - **属性**: カードの意味付け（文字列）。
  - **タグ**: 任意のタグを複数追加可能。

### 2.2 保存機能
- **画面名**: 保存処理
- **機能概要**: 入力されたタロット占い結果をFirebase Firestoreに保存。
- **データ構造**:
```json
{
  "date": "YYYY-MM-DD",
  "question": "質問内容",
  "cards": [
    {
      "type": 3,
      "position": true,
      "attribute": "過去"
    }
  ],
  "tags": ["タグ1", "タグ2"]
}
```

### 2.3 閲覧機能
- **画面名**: 結果閲覧画面
- **機能概要**: 保存された結果をリスト形式で表示。
- **操作可能項目**:
  - **ソート**: 日付、質問、タグで並び替え。
  - **フィルター**: タグや日付で絞り込み。
  - **詳細表示**: 個々の結果を確認。

---

## 3. UI設計

### 3.1 レイアウト
- **モバイルファースト設計**:
  - 縦スクロール型インターフェース。
- **PC画面対応**:
  - 横幅を活用しリスト表示を最適化。

### 3.2 デザイン
- **色彩テーマ**:
  - 落ち着いたトーン（例: ダークモードをメイン）。
- **操作性**:
  - シンプルで直感的なUI。
  - 入力項目はフォーカス可能な範囲を明確にする。

---

## 4. システム構成

### 4.1 フロントエンド
- **フレームワーク**: Solid.js
- **スタイル**: Tailwind CSS
- **UIライブラリ**: Shadcn対応ヘッドレスUI

### 4.2 バックエンド
- **サービス**: Firebase
  - **Firestore**: データ保存。
  - **Authentication**: 匿名認証でデータアクセス制御。
  - **Cloud Functions**: 必要に応じたサーバーサイド処理。

### 4.3 デプロイ
- **サービス**: Firebase Hosting
- **CI/CD**: Firebase CLIを使用した迅速なデプロイ。

---

## 5. データベース設計

### 5.1 テーブル構成
- **コレクション名**: tarot_records
- **ドキュメント構造**:
  - **date** (String): YYYY-MM-DD形式の日付。
  - **question** (String): 質問文。
  - **cards** (Array of Objects):
    - **type** (Number): カードの種類。
    - **position** (Boolean): 正位置（true）または逆位置（false）。
    - **attribute** (String): カード属性。
  - **tags** (Array of Strings): タグ。

### 5.2 データ例
```json
{
  "date": "2024-12-31",
  "question": "今日の運勢は？",
  "cards": [
    {
      "type": 7,
      "position": true,
      "attribute": "未来"
    }
  ],
  "tags": ["仕事", "運勢"]
}
```

---

## 6. 開発スケジュール

### 6.1 開発期間
- **全体期間**: 5日間
  - Day 1: 環境構築、Firebase設定、UIプロトタイプ作成。
  - Day 2-3: 入力・保存機能の実装。
  - Day 4: 閲覧機能の実装。
  - Day 5: テストおよびデプロイ。

---

## 7. 使用技術

### 7.1 フロントエンド
- Solid.js, Tailwind CSS, Shadcn

### 7.2 バックエンド
- Firebase Firestore, Firebase Authentication

### 7.3 開発環境
- Package Manager: Bun
- 開発ツール: VS Code, Firebase CLI

---

## 8. 注意事項
- ユーザーのデータは匿名認証により安全に管理。
- Firestoreセキュリティルールで外部アクセスを遮断。
- 初期リリース後に機能追加を計画。
